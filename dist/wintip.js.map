{"version":3,"file":"wintip.js","sources":["../src/wintip.js"],"sourcesContent":["function query(selector) {\r\n  return document.querySelectorAll(selector)\r\n}\r\n\r\nfunction likeNumber(value) {\r\n  return !isNaN(Number(value))\r\n}\r\n\r\nfunction isElement(ele) {\r\n  return typeof ele === 'object' && ele.nodeType === 1\r\n}\r\n\r\nfunction append(ele, html) {\r\n  if (isElement(ele)) {\r\n    ele.insertAdjacentHTML('beforeend', html)\r\n  } else {\r\n    query(ele)[0].insertAdjacentHTML('beforeend', html)\r\n  }\r\n}\r\n\r\nconst settings = {\r\n  output: true,\r\n  opacity: 0.75,\r\n  color: '#fff'\r\n}\r\n\r\nfunction winTip() {\r\n  const idNo = query('._win_tip').length + 1\r\n  const idStr = `_tip_${idNo}`\r\n  const tipNode = query(`.${idStr}`)[0]\r\n\r\n  return settings.output\r\n    ? fillTipMsg(tipNode, idStr, magicArgs(arguments))\r\n    : null\r\n}\r\n\r\nfunction magicArgs(args, name) {\r\n  let res = ''\r\n  ;[].slice.call(args).forEach(e => {\r\n    res += ' ' + (typeof e === 'object' ? JSON.stringify(e) : e)\r\n  })\r\n\r\n  return (name ? `[${name}] ` : '') + res.substring(1)\r\n}\r\n\r\nfunction fillTipMsg(tipNode, idStr, msg) {\r\n  const tipBox = query('._win_tip_box')\r\n\r\n  const tipHtml = `<span class=\"_win_tip ${idStr}\" style=\"display: inline-block;min-width: 80px;padding: 8px;margin-bottom: 1px;background-color: rgba(0, 0, 0, ${settings.opacity});\">${msg}</span><br>`\r\n\r\n  const tipBoxHtml = `<div class=\"_win_tip_box\" style=\"position: fixed;top: 0;left: 0;max-height: 75%;word-break: break-all;max-width: 55%;color: ${settings.color};font-size: 12px;z-index: 100;overflow: auto;text-shadow: 1px 1px rgba(0, 0, 0, 0.3);-webkit-overflow-scrolling: touch;\">${tipHtml}</div>`\r\n\r\n  if (tipNode) {\r\n    tipNode.textContent = msg\r\n  } else if (tipBox.length) {\r\n    append(tipBox[0], tipHtml)\r\n  } else {\r\n    append('body', tipBoxHtml)\r\n  }\r\n\r\n  return tipNode || query(`.${idStr}`)[0]\r\n}\r\n\r\nwinTip.remove = tip => {\r\n  const node = isElement(tip) ? tip : query(`._tip_${tip}`)[0]\r\n  if (node) {\r\n    node.nextElementSibling.remove()\r\n    node.remove()\r\n  }\r\n}\r\n\r\nwinTip.config = options => {\r\n  Object.assign(settings, options)\r\n}\r\n\r\nwinTip.$ = name => {\r\n  const tipNode = query(`._tip_${name}`)[0]\r\n\r\n  if ((likeNumber(name) && !tipNode) || !name) {\r\n    throw new Error('[wintip]: name is not defined')\r\n  }\r\n\r\n  return function() {\r\n    const idNo = query('._win_tip').length + 1\r\n    const idStr = likeNumber(name)\r\n      ? `_tip_${idNo}`\r\n      : `_tip_${idNo} _tip_${name}`\r\n\r\n    return settings.output\r\n      ? fillTipMsg(\r\n          tipNode,\r\n          idStr,\r\n          magicArgs(arguments, likeNumber(name) ? '' : name)\r\n        )\r\n      : null\r\n  }\r\n}\r\n\r\nexport default winTip\r\n"],"names":["const","let"],"mappings":"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"}